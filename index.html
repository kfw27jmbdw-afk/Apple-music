<!DOCTYPE html>
<html>
<head>
    <title> Private Player v24.1</title>
    <style>
        body { background: #000; color: #fff; font-family: -apple-system, sans-serif; text-align: center; padding: 20px; }
        .player-card { background: #1c1c1e; border-radius: 25px; padding: 30px; max-width: 350px; margin: 40px auto; border: 1px solid #333; }
        
        /* Fixed File Label */
        .file-input-label { 
            background: #007aff; 
            color: #fff; 
            padding: 15px 25px; 
            border-radius: 12px; 
            cursor: pointer; 
            display: inline-block; 
            margin-bottom: 25px; 
            font-weight: bold;
            box-shadow: 0 4px 15px rgba(0,122,255,0.3);
        }
        
        /* Hidden input but with broad accept */
        input[type="file"] { display: none; }
        
        .song-info h2 { margin: 0; font-size: 22px; color: #fff; }
        .play-btn { background: #fff; color: #000; width: 65px; height: 65px; border-radius: 50%; border: none; font-size: 26px; cursor: pointer; margin-top: 20px; }
    </style>
</head>
<body>

    <div class="player-card">
        <div id="status" style="font-size:10px; color:#32d74b; margin-bottom:10px;">V24.1 FIXED ENGINE</div>

        <label class="file-input-label">
            + SELECT MUSIC FILE
            <input type="file" id="localFile" accept="audio/mpeg, audio/mp3, audio/wav, audio/x-m4a, audio/*" onchange="handleLocalFile(this)">
        </label>

        <div class="song-info">
            <h2 id="title">No Song</h2>
            <p id="source" style="color:#8e8e93; font-size:12px;">Tap blue button to load</p>
        </div>

        <button class="play-btn" id="playBtn" onclick="togglePlay()">▶</button>
    </div>

<script>
    let audio = new Audio();

    function handleLocalFile(input) {
        const file = input.files[0];
        if (file) {
            // Memory URL creation
            const fileURL = URL.createObjectURL(file);
            audio.src = fileURL;
            
            document.getElementById('title').innerText = file.name;
            document.getElementById('source').innerText = "LOCAL STORAGE";
            
            audio.play();
            document.getElementById('playBtn').innerText = "⏸";
        }
    }

    function togglePlay() {
        if (!audio.src) return alert("Pehle file select karo bhai!");
        
        if (audio.paused) {
            audio.play();
            document.getElementById('playBtn').innerText = "⏸";
        } else {
            audio.pause();
            document.getElementById('playBtn').innerText = "▶";
        }
    }

    // Lockscreen sync
    audio.onplay = () => { document.getElementById('playBtn').innerText = "⏸"; };
    audio.onpause = () => { document.getElementById('playBtn').innerText = "▶"; };
</script>
</body>
</html>
